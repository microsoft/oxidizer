trigger:
- main

parameters:
- name: sourceBranch
  displayName: 'Source branch for checkout and PR target'
  type: string
  default: 'main'
- name: validationOsList
  type: object
  default:
  - linux
  - windows
- name: validationProfiles
  type: object
  default:
  - dev
  - release
- name: previousVersion
  type: string
  default: 'HEAD^'

resources:
  repositories:
  # Internal repository that hosts the publishing template
  - repository: ox-sdk
    type: git
    name: ox-sdk
    ref: refs/heads/u/makolnek/publish-template

extends:
  template: .pipelines/templates/OxidizerGitHub.Publish.yml@ox-sdk
  parameters:
    sourceBranch: ${{ parameters.sourceBranch }}
    validationOsList: ${{ parameters.validationOsList }}
    validationProfiles: ${{ parameters.validationProfiles }}
    previousVersion: ${{ parameters.previousVersion }}